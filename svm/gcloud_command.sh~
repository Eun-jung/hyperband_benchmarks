#!/bin/bash
output=$(gcloud compute instance-groups managed list-instances mnist-svm --zone us-central1-f | cut -d' ' -f1)
instances_list=($output)
seeds="1 5001 10001 15001 20001 25001 30001 35001 40001 45001 50001 55001 60001 65001 70001 75001 80001 85001 90001 95001"
seeds=($seeds)
for k in $(seq 2 10); do 
	let "s=$k-1"
	seed=${seeds[$s]}
	instance=${instances_list[$k]}
	echo $seed
	echo $instance
        gcloud compute ssh lisha_c_li@$instance --zone us-central1-f "screen -dm sudo python /home/lisha_c_li/RoBO/examples/example_fmin_fabolas.py \"$seed\"" 
done
for k in $(seq 11 12); do 
	let "s=$k-11"
	seed=${seeds[$s]}
	instance=${instances_list[$k]}
	echo $seed
	echo $instance
        gcloud compute ssh lisha_c_li@$instance --zone us-central1-f "cd /home/lisha_c_li/hyperband_nnet; screen -dm sudo python hyperband_alg.py -m mnist_svm -i /home/lisha_c_li/RoBO/examples -o /home/lisha_c_li/hyperband_nnet/mnist_svm/hyperband_constant -s \"$seed\" -d 0"
done
for k in $(seq 21 22); do 
	let "s=$k-21"
	seed=${seeds[$s]}
	instance=${instances_list[$k]}
	echo $seed
	echo $instance
        gcloud compute ssh lisha_c_li@$instance --zone us-central1-f "cd /home/lisha_c_li/hyperband_nnet; screen -dm sudo python random_search.py -m mnist_svm -i /home/lisha_c_li/RoBO/examples -o /home/lisha_c_li/hyperband_nnet/mnist_svm/hyperband_constant -s \"$seed\" -d 0"
done
wait


